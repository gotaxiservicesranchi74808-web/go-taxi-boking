<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>GO TAXI SERVICES â€“ Booking View</title>

<style>
body{font-family:Arial;background:#f4f6f8;padding:20px}
h2{color:#1e88e5}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{border:1px solid #ddd;padding:8px;text-align:left}
th{background:#1e88e5;color:#fff}
button{padding:5px 10px;margin:2px;border:none;border-radius:4px;cursor:pointer}
.view{background:#4caf50;color:#fff}
.cus{background:#2196f3;color:#fff}
.drv{background:#ff9800;color:#fff}
</style>
</head>

<body>

<h2>ðŸ“‹ ALL BOOKINGS</h2>

<table>
<thead>
<tr>
<th>Trip ID</th>
<th>Trip</th>
<th>Pickup Date</th>
<th>Customer</th>
<th>Action</th>
</tr>
</thead>
<tbody id="bookingTable"></tbody>
</table>

<script>
const SCRIPT_URL =
"https://script.google.com/macros/s/AKfycbzyI3uVrcrj3N6H7vhhbFKzy7PAYEKQAMRpOKQKVd8z8eepLRHSksdpviSbx12cruL-OQ/exec";

fetch(SCRIPT_URL)
.then(res=>res.json())
.then(data=>{
  let html="";
  data.slice(1).forEach(b=>{
    html+=`
    <tr>
      <td>${b.tripId||""}</td>
      <td>${b.tripType||""}</td>
      <td>${b.pickupDate||""}</td>
      <td>${b.customerName||""}</td>
      <td>
        <button class="view" onclick='viewBooking(${JSON.stringify(b)})'>View</button>
        <button class="cus" onclick='shareCustomer(${JSON.stringify(b)})'>Customer</button>
        <button class="drv" onclick='shareDriver(${JSON.stringify(b)})'>Driver</button>
      </td>
    </tr>`;
  });
  bookingTable.innerHTML=html;
});

function viewBooking(b){
alert(
`ðŸš– BOOKING DETAILS

Trip ID: ${b.tripId}
Trip Type: ${b.tripType}

Pickup Date: ${b.pickupDate}
Pickup Time: ${b.pickupTime}

Customer: ${b.customerName} (${b.customerPhone})
Driver: ${b.driverName} (${b.driverPhone})

Cab: ${b.cabType}
Cab No: ${b.cabNo}

Route:
${b.pickup} â†’ ${b.goingOn} â†’ ${b.drop}

Total Fare: â‚¹${b.totalAmount}
Advance: â‚¹${b.advance}
Balance: â‚¹${b.balance}
Driver Collection: â‚¹${b.driverCollection}`
);
}

function shareCustomer(b){
let msg=`GO TAXI SERVICES
Booking ID: ${b.tripId}
Trip: ${b.tripType}

Pickup Date: ${b.pickupDate}
Pickup Time: ${b.pickupTime}

Route:
${b.pickup} â†’ ${b.goingOn} â†’ ${b.drop}

Cab: ${b.cabType}
Cab No: ${b.cabNo}

Total Fare: â‚¹${b.totalAmount}
Advance: â‚¹${b.advance}
Balance: â‚¹${b.balance}

Driver: ${b.driverName} (${b.driverPhone})

Contact: 8434143546
Website: https://gotaxiservices.com
Map: https://share.google/vI2VbDezpUTvdtzs3
Review: https://g.page/r/CbVg3mitMnAEEBM/review`;

window.open("https://wa.me/?text="+encodeURIComponent(msg));
}

function shareDriver(b){
let msg=`GO TAXI SERVICES â€“ DRIVER TRIP
Booking ID: ${b.tripId}

Pickup Date: ${b.pickupDate}
Pickup Time: ${b.pickupTime}

Customer: ${b.customerName} (${b.customerPhone})

Route:
${b.pickup} â†’ ${b.goingOn} â†’ ${b.drop}

Cab: ${b.cabType}
Cab No: ${b.cabNo}

Your Collection: â‚¹${b.driverCollection}

Office: 8434143546`;

window.open("https://wa.me/?text="+encodeURIComponent(msg));
}
</script>

</body>
</html>
